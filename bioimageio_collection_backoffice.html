<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.1"/>
    <title>bioimageio_collection_backoffice API documentation</title>
            <link rel="icon" href="https://bioimage.io/static/img/bioimage-io-icon-small.svg"/>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style><style>
    .pdoc .mermaid-pre {
        border: none;
        background: none;
    }
</style>
<script type="module" defer>
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs";

    /* Re-invoke Mermaid when DOM content changes, for example during search. */
    document.addEventListener("DOMContentLoaded", () => {
        new MutationObserver(() => mermaid.run()).observe(
            document.querySelector("main.pdoc").parentNode,
            {childList: true}
        );
    })
</script></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>
<a href="https://bioimage.io/">            <img src="https://bioimage.io/static/img/bioimage-io-logo.svg" class="logo" alt="project logo"/>
</a>
            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>

            <h2>Contents</h2>
            <ul>
  <li><a href="#collection">collection</a>
  <ul>
    <li><a href="#maintaining-the-bioimageio-collection">Maintaining the bioimage.io Collection</a></li>
  </ul></li>
  <li><a href="#add-community-partner">Add community partner</a>
  <ul>
    <li><a href="#add-community-partner-compatibility-checks">Add community partner compatibility checks</a></li>
  </ul></li>
</ul>


            <h2>Submodules</h2>
            <ul>
                    <li><a href="bioimageio_collection_backoffice/backup.html">backup</a></li>
                    <li><a href="bioimageio_collection_backoffice/cache.html">cache</a></li>
                    <li><a href="bioimageio_collection_backoffice/cli.html">cli</a></li>
                    <li><a href="bioimageio_collection_backoffice/collection_config.html">collection_config</a></li>
                    <li><a href="bioimageio_collection_backoffice/collection_json.html">collection_json</a></li>
                    <li><a href="bioimageio_collection_backoffice/common.html">common</a></li>
                    <li><a href="bioimageio_collection_backoffice/db_structure.html">db_structure</a></li>
                    <li><a href="bioimageio_collection_backoffice/gh_utils.html">gh_utils</a></li>
                    <li><a href="bioimageio_collection_backoffice/id_map.html">id_map</a></li>
                    <li><a href="bioimageio_collection_backoffice/mailroom.html">mailroom</a></li>
                    <li><a href="bioimageio_collection_backoffice/remote_base.html">remote_base</a></li>
                    <li><a href="bioimageio_collection_backoffice/remote_collection.html">remote_collection</a></li>
                    <li><a href="bioimageio_collection_backoffice/requests_utils.html">requests_utils</a></li>
                    <li><a href="bioimageio_collection_backoffice/run_dynamic_tests.html">run_dynamic_tests</a></li>
                    <li><a href="bioimageio_collection_backoffice/s3_client.html">s3_client</a></li>
                    <li><a href="bioimageio_collection_backoffice/settings.html">settings</a></li>
                    <li><a href="bioimageio_collection_backoffice/thumbnails.html">thumbnails</a></li>
                    <li><a href="bioimageio_collection_backoffice/validate_format.html">validate_format</a></li>
            </ul>

            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#BackOffice">BackOffice</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#BackOffice.__init__">BackOffice</a>
                        </li>
                        <li>
                                <a class="variable" href="#BackOffice.client">client</a>
                        </li>
                        <li>
                                <a class="function" href="#BackOffice.download">download</a>
                        </li>
                        <li>
                                <a class="function" href="#BackOffice.log">log</a>
                        </li>
                        <li>
                                <a class="function" href="#BackOffice.wipe">wipe</a>
                        </li>
                        <li>
                                <a class="function" href="#BackOffice.draft">draft</a>
                        </li>
                        <li>
                                <a class="function" href="#BackOffice.stage">stage</a>
                        </li>
                        <li>
                                <a class="function" href="#BackOffice.validate_format">validate_format</a>
                        </li>
                        <li>
                                <a class="function" href="#BackOffice.test">test</a>
                        </li>
                        <li>
                                <a class="function" href="#BackOffice.request_changes">request_changes</a>
                        </li>
                        <li>
                                <a class="function" href="#BackOffice.publish">publish</a>
                        </li>
                        <li>
                                <a class="function" href="#BackOffice.backup">backup</a>
                        </li>
                        <li>
                                <a class="function" href="#BackOffice.generate_collection_json">generate_collection_json</a>
                        </li>
                        <li>
                                <a class="function" href="#BackOffice.forward_emails_to_chat">forward_emails_to_chat</a>
                        </li>
                        <li>
                                <a class="function" href="#BackOffice.add_chat_message">add_chat_message</a>
                        </li>
                        <li>
                                <a class="function" href="#BackOffice.get_chat">get_chat</a>
                        </li>
                </ul>

            </li>
    </ul>


            <footer>bioimageio_collection_backoffice</footer>

        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
bioimageio_collection_backoffice    </h1>

                        <div class="docstring"><p><a href="https://github.com/bioimage-io/collection/actions/workflows/build.yaml"><img src="https://github.com/bioimage-io/collection/actions/workflows/build.yaml/badge.svg" alt="internal tests &amp; docs" /></a>
<a href="https://github.com/bioimage-io/collection/actions/workflows/generate_collection_json.yaml"><img src="https://github.com/bioimage-io/collection/actions/workflows/generate_collection_json.yaml/badge.svg" alt="collection overview" /></a>
<a href="https://github.com/bioimage-io/collection/actions/workflows/backup.yaml"><img src="https://github.com/bioimage-io/collection/actions/workflows/backup.yaml/badge.svg" alt="backup status" /></a></p>

<p><a href="https://github.com/bioimage-io/collection/actions/workflows/stage.yaml"><img src="https://github.com/bioimage-io/collection/actions/workflows/stage.yaml/badge.svg" alt="last resource staging" /></a>
<a href="https://github.com/bioimage-io/collection/actions/workflows/test.yaml"><img src="https://github.com/bioimage-io/collection/actions/workflows/test.yaml/badge.svg" alt="last resource testing" /></a>
<a href="https://github.com/bioimage-io/collection/actions/workflows/publish.yaml"><img src="https://github.com/bioimage-io/collection/actions/workflows/publish.yaml/badge.svg" alt="last resource publishing" /></a></p>

<p><a href="https://github.com/bioimage-io/collection/actions/workflows/check_compatibility_ilastik.yaml"><img src="https://github.com/bioimage-io/collection/actions/workflows/check_compatibility_ilastik.yaml/badge.svg" alt="ilastik compatibility" /></a></p>

<p><img src="https://img.shields.io/badge/code%20style-black-000000.svg" alt="code style" /></p>

<h1 id="collection">collection</h1>

<p>This repository is used to manage the resources displayed on <a href="https://bioimage.io">bioimage.io</a>.</p>

<p>Most users will not directly dispatch the workflows defined in this reporitory, but should instead login on <a href="https://bioimage.io">bioimage.io</a> and use the front-end to interact with the bioimage.io collection.</p>

<p>We currently do not have a workflow for direct upload, but publicly available resource packages may be staged with a stage workflow dispatch.</p>

<h2 id="maintaining-the-bioimageio-collection">Maintaining the bioimage.io Collection</h2>

<p>In order to update or add new resources to the <a href="https://bioimage.io">bioimage.io</a> collection, they have to undergo review.
Current reviewers are listed in <a href="https://github.com/bioimage-io/collection/blob/main/bioimageio_collection_config.json"><code>bioimageio_collection_config.json</code></a>, under section <code>reviewers</code>.</p>

<h3 id="reviewer-onboarding">Reviewer Onboarding</h3>

<ol>
<li>Open a pull request, adding a person to the <a href="https://github.com/bioimage-io/collection/blob/main/bioimageio_collection_config.json">list of reviewers</a>, see <a href="https://github.com/bioimage-io/collection/pull/75">https://github.com/bioimage-io/collection/pull/75</a> for an example.
<ul>
<li>one public email address is required</li>
<li>github id can be found using <code>https://api.github.com/users/&lt;github_username&gt;</code></li>
</ul></li>
<li>So the changes can be applied, the service needs to be restored manually. Reach out to the team or leave an issue.</li>
<li>Once the pull request has been merged, the new reviewer can
<ul>
<li>accept resource drafts</li>
<li>request changes on resource drafts</li>
<li>upload a new version for any resource</li>
</ul></li>
</ol>

<h3 id="adding-a-bioimageio-resource">Adding a bioimage.io resource</h3>

<p>A bioimage.io resource is created by a user uploading a _resource package_.
Such a _resource package_ could e.g. be a newly uploaded _model package_, or _notebook package_.
Typically, uploaders would go via <a href="https://bioimage.io/#/upload">bioimage.io/upload</a>.
Alternatively, any direct link to a downloadable resource package (<code>.zip</code>-file) would work.
The latter option is reserved for members of this repository (or the bioimageio org).
Once available online the _resource package_ is staged (see <a href="#staging">Staging section</a>), tested (see <a href="#testing">Testing section</a>), and reviewed (see <a href="#review">Review section</a>).</p>

<pre class="mermaid-pre"><div class="mermaid">graph TD;
    stage[stage]
    test[test]
    cr[request changes]
    publish[accept/publish]
    backup[backup to Zenodo]

    stage--&gt;test
    test--&gt;cr
    cr--&gt;stage
    test--&gt;publish
    publish--&gt;backup
</div></pre>

<h4 id="staging">Staging</h4>

<p>If the _resource package_ was uploaded via the bioimage.io website, the staging of the new resource draft is initiated automatically by the uploader service.
Otherwise, given a download URL to a _resource package_, the <code>stage</code> workflow needs to be <a href="https://github.com/bioimage-io/collection/actions/workflows/stage.yaml">dispatched manually, or via github api</a> ("run workflow")<sup class="footnote-ref" id="fnref-1"><a href="#fn-1">1</a></sup>.</p>

<p>Staging unpacks the files from the zipped resource package to our public S3.
Once unpacked, the staged _resource draft_ is automatically tested (the <a href="https://github.com/bioimage-io/collection/actions/workflows/test.yaml">test workflow</a> is dispatched automatically at the end of the stage workflow).</p>

<h4 id="testing">Testing</h4>

<p>Staged resource drafts are automatically tested:</p>

<ul>
<li>Is their metadata valid?</li>
<li>Can test outputs be reproduced from test inputs?</li>
<li>Are linked URLs available?</li>
<li>...</li>
</ul>

<p>Tests can also be triggered (via github api or manually) by dispatching the <a href="https://github.com/bioimage-io/collection/actions/workflows/test.yaml">test workflow</a><sup class="footnote-ref" id="fnref-2"><a href="#fn-2">2</a></sup>.</p>

<p>Once the tests are completed, the uploader gets a notification via email that their draft is awaiting review; now a reviewer needs to take a look.</p>

<p>An overview of all pending _resource drafts_ can be found at <a href="https://bioimageio-uploader.netlify.app/#/status">https://bioimageio-uploader.netlify.app/#/status</a>.
A _draft_ is identified by its concept id (<code>id</code> from the <code>rdf.yaml</code>).</p>

<h4 id="review">Review</h4>

<p>Reviewers should check the models for technical correctness (aided by CI, see <a href="#testing">Testing section</a>) and contents/metadata of the resource.</p>

<p>To this end it can be helpful to check the logs displayed at <code>https://bioimageio-uploader.netlify.app/#/status/&lt;concept_id&gt;</code>.
There information about automated workflow steps and validation outcome is logged.
Additionally an 'error' status may be shown if an exception occured in the GitHub workflow run producing the log.
To be able to see all the packaged models along with the 'rdf.yaml' as well as covers and other documentation, go to the <a href="https://bioimage.io/#/?repo=https%3A%2F%2Fuk1s3.embassy.ebi.ac.uk%2Fpublic-datasets%2Fbioimage.io%2Fcollection_draft.json">draft collection</a> and download the model from there.</p>

<p>For models, reviewers can use <a href="https://bioimage.io/docs/#/guides/developers-guide?id=model-documentation">the model documentation</a> as a guide.</p>

<p>Reviewers can:</p>

<ul>
<li>_request changes_:
A contributor is expected to upload an updated (fixed) draft (which overwrites the current draft).
This can be done either by the website, or the stage workflow.
Important is to keep the <code>id</code> the same.</li>
<li>_apply minor changes_:
For minor changes it is often not necessary to involve the contributor directly.
Such changes could be e.g. obvious typos in some of the fields.
Reviewers can apply changes locally to the _resource package_ and re-upload (using the same <code>id</code>), or, given S3 credentials, files could also be changed in place.
Latter way of changing requires manually triggering the tests (see <a href="#testing">Testing section</a>).</li>
<li>_accept_:
Accepting the _resource draft_ via the web interface triggers the <a href="https://github.com/bioimage-io/collection/actions/workflows/publish.yaml">publish workflow</a>, which creates a new unique _resource version_.
As a result, the resource is published, the draft deleted and, thus, the _resource_ is available via the <a href="https://bioimage.io">bioimage.io</a> website.
The <a href="https://github.com/bioimage-io/collection/actions/workflows/backup.yaml">backup workflow</a> will upload/publish the _resource version_ to zenodo using the bioimage.io bot account (tagged with <a href="https://zenodo.org/search?q=metadata.subjects.subject%3A%22backup.bioimage.io%22&amp;l=list&amp;p=1&amp;s=10&amp;sort=bestmatch"><code>backup.bioimage.io</code></a>).</li>
</ul>

<h1 id="add-community-partner">Add community partner</h1>

<p>To link yourself as a community partner, please create a PR to insert relevant metadata into <a href="https://github.com/bioimage-io/collection/blob/4087336ad00bff0198f5de83c94aa13be357840d/bioimageio_collection_config.json">bioimageio_collection_config.json</a> under <code>"partners"</code>.
Checkout <a href="https://github.com/bioimage-io/collection/blob/4087336ad00bff0198f5de83c94aa13be357840d/bioimageio_collection_config.json#L283-L301">ilastik partner entry</a> for an example.</p>

<h2 id="add-community-partner-compatibility-checks">Add community partner compatibility checks</h2>

<p>Any community partner is invited to add a GitHub Actions workflow in this repo (please make a PR) that generates reports on its software compatibility with new and updated resources in the bioimage.io collection.
See <a href="https://github.com/bioimage-io/collection/blob/main/.github/workflows/check_compatibility_ilastik.yaml">ilastik compatibility checks workflow</a> for an example.</p>

<p>If you are not familiar with GitHub Actions workflows, we can help you to set this up analog to our existing community partner compatibility checks.
Ideally you can provide a script to create a compatibility report (a relativley simple json file) for a given resource description. see <a href="https://github.com/bioimage-io/collection/blob/main/scripts/check_compatibility_ilastik.py">this Python script as an example</a>.</p>

<div class="footnotes">
<hr />
<ol>
<li id="fn-1">
<p>Parameters to this workflow are <code>bioimage.io resource concept ID</code> (<code>id</code> from the <code>rdf.yaml</code>), and <code>Download URL of the resource package zip-file</code>, which should contain a publicly reachable URL to a _resource package_ <code>.zip</code>-file.&#160;<a href="#fnref-1" class="footnoteBackLink" title="Jump back to footnote 1 in the text.">&#8617;</a></p>
</li>

<li id="fn-2">
<p>Parameters to this workflow are <code>Bioimage.io resource concept ID</code> (<code>id</code> from the <code>rdf.yaml</code>), and <code>Published version or 'draft'</code> (optional, usually <code>draft</code>).&#160;<a href="#fnref-2" class="footnoteBackLink" title="Jump back to footnote 2 in the text.">&#8617;</a></p>
</li>
</ol>
</div>
</div>

                        <input id="mod-bioimageio_collection_backoffice-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-bioimageio_collection_backoffice-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">1</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">2</span></a><span class="sd">.. include:: ../README.md</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">3</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">4</span></a>
</span><span id="L-5"><a href="#L-5"><span class="linenos">5</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">bioimageio_collection_backoffice.cli</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">6</span></a>
</span><span id="L-7"><a href="#L-7"><span class="linenos">7</span></a><span class="n">BackOffice</span> <span class="o">=</span> <span class="n">bioimageio_collection_backoffice</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">BackOffice</span>
</span></pre></div>


            </section>
                <section id="BackOffice">
                            <input id="BackOffice-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">BackOffice</span>:

                <label class="view-source-button" for="BackOffice-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BackOffice"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BackOffice-28"><a href="#BackOffice-28"><span class="linenos"> 28</span></a><span class="k">class</span><span class="w"> </span><span class="nc">BackOffice</span><span class="p">:</span>
</span><span id="BackOffice-29"><a href="#BackOffice-29"><span class="linenos"> 29</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;This backoffice aids to maintain the bioimage.io collection&quot;&quot;&quot;</span>
</span><span id="BackOffice-30"><a href="#BackOffice-30"><span class="linenos"> 30</span></a>
</span><span id="BackOffice-31"><a href="#BackOffice-31"><span class="linenos"> 31</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="BackOffice-32"><a href="#BackOffice-32"><span class="linenos"> 32</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BackOffice-33"><a href="#BackOffice-33"><span class="linenos"> 33</span></a>        <span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">s3_host</span><span class="p">,</span>
</span><span id="BackOffice-34"><a href="#BackOffice-34"><span class="linenos"> 34</span></a>        <span class="n">bucket</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">s3_bucket</span><span class="p">,</span>
</span><span id="BackOffice-35"><a href="#BackOffice-35"><span class="linenos"> 35</span></a>        <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">s3_folder</span><span class="p">,</span>
</span><span id="BackOffice-36"><a href="#BackOffice-36"><span class="linenos"> 36</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="BackOffice-37"><a href="#BackOffice-37"><span class="linenos"> 37</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="BackOffice-38"><a href="#BackOffice-38"><span class="linenos"> 38</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">,</span> <span class="n">bucket</span><span class="o">=</span><span class="n">bucket</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">)</span>
</span><span id="BackOffice-39"><a href="#BackOffice-39"><span class="linenos"> 39</span></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;created backoffice with client </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">)</span>
</span><span id="BackOffice-40"><a href="#BackOffice-40"><span class="linenos"> 40</span></a>
</span><span id="BackOffice-41"><a href="#BackOffice-41"><span class="linenos"> 41</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">download</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_collection_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">output_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="BackOffice-42"><a href="#BackOffice-42"><span class="linenos"> 42</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;downlaod a file from the collection (using the MinIO client)&quot;&quot;&quot;</span>
</span><span id="BackOffice-43"><a href="#BackOffice-43"><span class="linenos"> 43</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">in_collection_path</span><span class="p">)</span>
</span><span id="BackOffice-44"><a href="#BackOffice-44"><span class="linenos"> 44</span></a>        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="BackOffice-45"><a href="#BackOffice-45"><span class="linenos"> 45</span></a>            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span>
</span><span id="BackOffice-46"><a href="#BackOffice-46"><span class="linenos"> 46</span></a>                <span class="sa">f</span><span class="s2">&quot;failed to download </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_file_url</span><span class="p">(</span><span class="n">in_collection_path</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="BackOffice-47"><a href="#BackOffice-47"><span class="linenos"> 47</span></a>            <span class="p">)</span>
</span><span id="BackOffice-48"><a href="#BackOffice-48"><span class="linenos"> 48</span></a>
</span><span id="BackOffice-49"><a href="#BackOffice-49"><span class="linenos"> 49</span></a>        <span class="k">if</span> <span class="n">output_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="BackOffice-50"><a href="#BackOffice-50"><span class="linenos"> 50</span></a>            <span class="n">output_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">in_collection_path</span><span class="p">)</span>
</span><span id="BackOffice-51"><a href="#BackOffice-51"><span class="linenos"> 51</span></a>
</span><span id="BackOffice-52"><a href="#BackOffice-52"><span class="linenos"> 52</span></a>        <span class="n">_</span> <span class="o">=</span> <span class="n">output_path</span><span class="o">.</span><span class="n">write_bytes</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="BackOffice-53"><a href="#BackOffice-53"><span class="linenos"> 53</span></a>
</span><span id="BackOffice-54"><a href="#BackOffice-54"><span class="linenos"> 54</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">log</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="BackOffice-55"><a href="#BackOffice-55"><span class="linenos"> 55</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;log a message&quot;&quot;&quot;</span>
</span><span id="BackOffice-56"><a href="#BackOffice-56"><span class="linenos"> 56</span></a>
</span><span id="BackOffice-57"><a href="#BackOffice-57"><span class="linenos"> 57</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">settings</span><span class="o">.</span><span class="n">run_url</span><span class="p">:</span>
</span><span id="BackOffice-58"><a href="#BackOffice-58"><span class="linenos"> 58</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;RUN_URL&#39; not set&quot;</span><span class="p">)</span>
</span><span id="BackOffice-59"><a href="#BackOffice-59"><span class="linenos"> 59</span></a>
</span><span id="BackOffice-60"><a href="#BackOffice-60"><span class="linenos"> 60</span></a>        <span class="n">rv</span> <span class="o">=</span> <span class="n">get_remote_resource_version</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>
</span><span id="BackOffice-61"><a href="#BackOffice-61"><span class="linenos"> 61</span></a>        <span class="n">rv</span><span class="o">.</span><span class="n">extend_log</span><span class="p">(</span><span class="n">Log</span><span class="p">(</span><span class="n">entries</span><span class="o">=</span><span class="p">[</span><span class="n">LogEntry</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)]))</span>
</span><span id="BackOffice-62"><a href="#BackOffice-62"><span class="linenos"> 62</span></a>
</span><span id="BackOffice-63"><a href="#BackOffice-63"><span class="linenos"> 63</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">wipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subfolder</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
</span><span id="BackOffice-64"><a href="#BackOffice-64"><span class="linenos"> 64</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;DANGER ZONE: wipes `subfolder` completely, only use for test folders!&quot;&quot;&quot;</span>
</span><span id="BackOffice-65"><a href="#BackOffice-65"><span class="linenos"> 65</span></a>        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_file_url</span><span class="p">(</span><span class="n">subfolder</span><span class="p">)</span>
</span><span id="BackOffice-66"><a href="#BackOffice-66"><span class="linenos"> 66</span></a>        <span class="n">key_parts</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;sandbox&quot;</span><span class="p">,</span> <span class="s2">&quot;testing&quot;</span><span class="p">)</span>
</span><span id="BackOffice-67"><a href="#BackOffice-67"><span class="linenos"> 67</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">p</span> <span class="ow">in</span> <span class="n">url</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">key_parts</span><span class="p">):</span>
</span><span id="BackOffice-68"><a href="#BackOffice-68"><span class="linenos"> 68</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Refusing to wipe </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2"> (missing any of </span><span class="si">{</span><span class="n">key_parts</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</span><span id="BackOffice-69"><a href="#BackOffice-69"><span class="linenos"> 69</span></a>
</span><span id="BackOffice-70"><a href="#BackOffice-70"><span class="linenos"> 70</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">rm_dir</span><span class="p">(</span><span class="n">subfolder</span><span class="p">)</span>
</span><span id="BackOffice-71"><a href="#BackOffice-71"><span class="linenos"> 71</span></a>
</span><span id="BackOffice-72"><a href="#BackOffice-72"><span class="linenos"> 72</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">draft</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">package_url</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="BackOffice-73"><a href="#BackOffice-73"><span class="linenos"> 73</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;stage a new resourse version draft from `package_url`</span>
</span><span id="BackOffice-74"><a href="#BackOffice-74"><span class="linenos"> 74</span></a>
</span><span id="BackOffice-75"><a href="#BackOffice-75"><span class="linenos"> 75</span></a><span class="sd">        Args:</span>
</span><span id="BackOffice-76"><a href="#BackOffice-76"><span class="linenos"> 76</span></a><span class="sd">            concept_id: overwrite `id` found in **package_url**.</span>
</span><span id="BackOffice-77"><a href="#BackOffice-77"><span class="linenos"> 77</span></a><span class="sd">                        If **concept_id** is an empty string a new concept_id is</span>
</span><span id="BackOffice-78"><a href="#BackOffice-78"><span class="linenos"> 78</span></a><span class="sd">                        assigned.</span>
</span><span id="BackOffice-79"><a href="#BackOffice-79"><span class="linenos"> 79</span></a><span class="sd">            package_url: Public source of zipped package to upload.</span>
</span><span id="BackOffice-80"><a href="#BackOffice-80"><span class="linenos"> 80</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BackOffice-81"><a href="#BackOffice-81"><span class="linenos"> 81</span></a>        <span class="n">_</span> <span class="o">=</span> <span class="n">draft_new_version</span><span class="p">(</span><span class="n">RemoteCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">),</span> <span class="n">package_url</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">)</span>
</span><span id="BackOffice-82"><a href="#BackOffice-82"><span class="linenos"> 82</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">generate_collection_json</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;draft&quot;</span><span class="p">,</span> <span class="n">ignore_test_summaries</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="BackOffice-83"><a href="#BackOffice-83"><span class="linenos"> 83</span></a>
</span><span id="BackOffice-84"><a href="#BackOffice-84"><span class="linenos"> 84</span></a>    <span class="n">stage</span> <span class="o">=</span> <span class="n">draft</span>
</span><span id="BackOffice-85"><a href="#BackOffice-85"><span class="linenos"> 85</span></a>
</span><span id="BackOffice-86"><a href="#BackOffice-86"><span class="linenos"> 86</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">validate_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="BackOffice-87"><a href="#BackOffice-87"><span class="linenos"> 87</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;validate a resource version&#39;s rdf.yaml&quot;&quot;&quot;</span>
</span><span id="BackOffice-88"><a href="#BackOffice-88"><span class="linenos"> 88</span></a>        <span class="n">rv</span> <span class="o">=</span> <span class="n">get_remote_resource_version</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>
</span><span id="BackOffice-89"><a href="#BackOffice-89"><span class="linenos"> 89</span></a>        <span class="n">validate_format</span><span class="p">(</span><span class="n">rv</span><span class="p">)</span>
</span><span id="BackOffice-90"><a href="#BackOffice-90"><span class="linenos"> 90</span></a>
</span><span id="BackOffice-91"><a href="#BackOffice-91"><span class="linenos"> 91</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">test</span><span class="p">(</span>
</span><span id="BackOffice-92"><a href="#BackOffice-92"><span class="linenos"> 92</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BackOffice-93"><a href="#BackOffice-93"><span class="linenos"> 93</span></a>        <span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="BackOffice-94"><a href="#BackOffice-94"><span class="linenos"> 94</span></a>        <span class="n">version</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="BackOffice-95"><a href="#BackOffice-95"><span class="linenos"> 95</span></a>        <span class="n">weight_format</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">SupportedWeightsFormat</span><span class="p">,</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BackOffice-96"><a href="#BackOffice-96"><span class="linenos"> 96</span></a>        <span class="n">create_env_outcome</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;success&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
</span><span id="BackOffice-97"><a href="#BackOffice-97"><span class="linenos"> 97</span></a>        <span class="n">conda_env_file</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;environment.yaml&quot;</span><span class="p">),</span>
</span><span id="BackOffice-98"><a href="#BackOffice-98"><span class="linenos"> 98</span></a>    <span class="p">):</span>
</span><span id="BackOffice-99"><a href="#BackOffice-99"><span class="linenos"> 99</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;run dynamic tests for a (staged) resource version&quot;&quot;&quot;</span>
</span><span id="BackOffice-100"><a href="#BackOffice-100"><span class="linenos">100</span></a>        <span class="n">rv</span> <span class="o">=</span> <span class="n">get_remote_resource_version</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>
</span><span id="BackOffice-101"><a href="#BackOffice-101"><span class="linenos">101</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="BackOffice-102"><a href="#BackOffice-102"><span class="linenos">102</span></a>            <span class="nb">isinstance</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span> <span class="n">RecordDraft</span><span class="p">)</span>
</span><span id="BackOffice-103"><a href="#BackOffice-103"><span class="linenos">103</span></a>            <span class="ow">and</span> <span class="p">(</span><span class="n">rv_status</span> <span class="o">:=</span> <span class="n">rv</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">status</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="BackOffice-104"><a href="#BackOffice-104"><span class="linenos">104</span></a>            <span class="ow">and</span> <span class="n">rv_status</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;unpacked&quot;</span>
</span><span id="BackOffice-105"><a href="#BackOffice-105"><span class="linenos">105</span></a>        <span class="p">):</span>
</span><span id="BackOffice-106"><a href="#BackOffice-106"><span class="linenos">106</span></a>            <span class="n">rv</span><span class="o">.</span><span class="n">set_testing_status</span><span class="p">(</span>
</span><span id="BackOffice-107"><a href="#BackOffice-107"><span class="linenos">107</span></a>                <span class="s2">&quot;Testing&quot;</span>
</span><span id="BackOffice-108"><a href="#BackOffice-108"><span class="linenos">108</span></a>                <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="n">weight_format</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">weight_format</span><span class="si">}</span><span class="s2"> weights&quot;</span><span class="p">),</span>
</span><span id="BackOffice-109"><a href="#BackOffice-109"><span class="linenos">109</span></a>            <span class="p">)</span>
</span><span id="BackOffice-110"><a href="#BackOffice-110"><span class="linenos">110</span></a>
</span><span id="BackOffice-111"><a href="#BackOffice-111"><span class="linenos">111</span></a>        <span class="n">run_dynamic_tests</span><span class="p">(</span>
</span><span id="BackOffice-112"><a href="#BackOffice-112"><span class="linenos">112</span></a>            <span class="n">record</span><span class="o">=</span><span class="n">rv</span><span class="p">,</span>
</span><span id="BackOffice-113"><a href="#BackOffice-113"><span class="linenos">113</span></a>            <span class="n">weight_format</span><span class="o">=</span><span class="n">weight_format</span> <span class="ow">or</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BackOffice-114"><a href="#BackOffice-114"><span class="linenos">114</span></a>            <span class="n">create_env_outcome</span><span class="o">=</span><span class="n">create_env_outcome</span><span class="p">,</span>
</span><span id="BackOffice-115"><a href="#BackOffice-115"><span class="linenos">115</span></a>            <span class="n">conda_env_file</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="n">conda_env_file</span><span class="p">),</span>
</span><span id="BackOffice-116"><a href="#BackOffice-116"><span class="linenos">116</span></a>        <span class="p">)</span>
</span><span id="BackOffice-117"><a href="#BackOffice-117"><span class="linenos">117</span></a>
</span><span id="BackOffice-118"><a href="#BackOffice-118"><span class="linenos">118</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="BackOffice-119"><a href="#BackOffice-119"><span class="linenos">119</span></a>            <span class="nb">isinstance</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span> <span class="n">RecordDraft</span><span class="p">)</span>
</span><span id="BackOffice-120"><a href="#BackOffice-120"><span class="linenos">120</span></a>            <span class="ow">and</span> <span class="p">(</span><span class="n">rv_status</span> <span class="o">:=</span> <span class="n">rv</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">status</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="BackOffice-121"><a href="#BackOffice-121"><span class="linenos">121</span></a>            <span class="ow">and</span> <span class="n">rv_status</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;testing&quot;</span>
</span><span id="BackOffice-122"><a href="#BackOffice-122"><span class="linenos">122</span></a>        <span class="p">):</span>
</span><span id="BackOffice-123"><a href="#BackOffice-123"><span class="linenos">123</span></a>            <span class="n">rv</span><span class="o">.</span><span class="n">await_review</span><span class="p">()</span>
</span><span id="BackOffice-124"><a href="#BackOffice-124"><span class="linenos">124</span></a>            <span class="n">notify_uploader</span><span class="p">(</span>
</span><span id="BackOffice-125"><a href="#BackOffice-125"><span class="linenos">125</span></a>                <span class="n">rv</span><span class="p">,</span>
</span><span id="BackOffice-126"><a href="#BackOffice-126"><span class="linenos">126</span></a>                <span class="s2">&quot;is awaiting review ⌛&quot;</span><span class="p">,</span>
</span><span id="BackOffice-127"><a href="#BackOffice-127"><span class="linenos">127</span></a>                <span class="sa">f</span><span class="s2">&quot;Thank you for submitting </span><span class="si">{</span><span class="n">rv</span><span class="o">.</span><span class="n">concept_id</span><span class="si">}</span><span class="s2">!</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="BackOffice-128"><a href="#BackOffice-128"><span class="linenos">128</span></a>                <span class="o">+</span> <span class="s2">&quot;Our maintainers will take a look shortly.</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="BackOffice-129"><a href="#BackOffice-129"><span class="linenos">129</span></a>                <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;A preview is available [here](</span><span class="si">{</span><span class="n">rv</span><span class="o">.</span><span class="n">bioimageio_url</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
</span><span id="BackOffice-130"><a href="#BackOffice-130"><span class="linenos">130</span></a>            <span class="p">)</span>
</span><span id="BackOffice-131"><a href="#BackOffice-131"><span class="linenos">131</span></a>
</span><span id="BackOffice-132"><a href="#BackOffice-132"><span class="linenos">132</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">request_changes</span><span class="p">(</span>
</span><span id="BackOffice-133"><a href="#BackOffice-133"><span class="linenos">133</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BackOffice-134"><a href="#BackOffice-134"><span class="linenos">134</span></a>        <span class="n">resource_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="BackOffice-135"><a href="#BackOffice-135"><span class="linenos">135</span></a>        <span class="n">version</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;deprecated&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;deprecated&quot;</span><span class="p">,</span>
</span><span id="BackOffice-136"><a href="#BackOffice-136"><span class="linenos">136</span></a>        <span class="n">reviewer</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="BackOffice-137"><a href="#BackOffice-137"><span class="linenos">137</span></a>        <span class="n">reason</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="BackOffice-138"><a href="#BackOffice-138"><span class="linenos">138</span></a>    <span class="p">):</span>
</span><span id="BackOffice-139"><a href="#BackOffice-139"><span class="linenos">139</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;mark a (staged) resource version as needing changes&quot;&quot;&quot;</span>
</span><span id="BackOffice-140"><a href="#BackOffice-140"><span class="linenos">140</span></a>        <span class="k">if</span> <span class="n">version</span> <span class="o">!=</span> <span class="s2">&quot;deprecated&quot;</span><span class="p">:</span>
</span><span id="BackOffice-141"><a href="#BackOffice-141"><span class="linenos">141</span></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;`version` argument is depcrecated and will be removed soon&quot;</span><span class="p">)</span>
</span><span id="BackOffice-142"><a href="#BackOffice-142"><span class="linenos">142</span></a>
</span><span id="BackOffice-143"><a href="#BackOffice-143"><span class="linenos">143</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">reviewer</span><span class="p">:</span>
</span><span id="BackOffice-144"><a href="#BackOffice-144"><span class="linenos">144</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing `reviewer`&quot;</span><span class="p">)</span>
</span><span id="BackOffice-145"><a href="#BackOffice-145"><span class="linenos">145</span></a>
</span><span id="BackOffice-146"><a href="#BackOffice-146"><span class="linenos">146</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">reason</span><span class="p">:</span>
</span><span id="BackOffice-147"><a href="#BackOffice-147"><span class="linenos">147</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing `reason`&quot;</span><span class="p">)</span>
</span><span id="BackOffice-148"><a href="#BackOffice-148"><span class="linenos">148</span></a>
</span><span id="BackOffice-149"><a href="#BackOffice-149"><span class="linenos">149</span></a>        <span class="n">rv</span> <span class="o">=</span> <span class="n">RecordDraft</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">,</span> <span class="n">concept_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">)</span>
</span><span id="BackOffice-150"><a href="#BackOffice-150"><span class="linenos">150</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">rv</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="BackOffice-151"><a href="#BackOffice-151"><span class="linenos">151</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">rv</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39; not found&quot;</span><span class="p">)</span>
</span><span id="BackOffice-152"><a href="#BackOffice-152"><span class="linenos">152</span></a>
</span><span id="BackOffice-153"><a href="#BackOffice-153"><span class="linenos">153</span></a>        <span class="n">rv</span><span class="o">.</span><span class="n">request_changes</span><span class="p">(</span><span class="n">reviewer</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
</span><span id="BackOffice-154"><a href="#BackOffice-154"><span class="linenos">154</span></a>        <span class="n">notify_uploader</span><span class="p">(</span>
</span><span id="BackOffice-155"><a href="#BackOffice-155"><span class="linenos">155</span></a>            <span class="n">rv</span><span class="p">,</span>
</span><span id="BackOffice-156"><a href="#BackOffice-156"><span class="linenos">156</span></a>            <span class="s2">&quot;needs changes 📑&quot;</span><span class="p">,</span>
</span><span id="BackOffice-157"><a href="#BackOffice-157"><span class="linenos">157</span></a>            <span class="sa">f</span><span class="s2">&quot;Thank you for submitting </span><span class="si">{</span><span class="n">rv</span><span class="o">.</span><span class="n">concept_id</span><span class="si">}</span><span class="s2">!</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="BackOffice-158"><a href="#BackOffice-158"><span class="linenos">158</span></a>            <span class="o">+</span> <span class="s2">&quot;We kindly ask you to upload an updated version, because: </span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="BackOffice-159"><a href="#BackOffice-159"><span class="linenos">159</span></a>            <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">reason</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>  <span class="c1"># TODO: add link to chat</span>
</span><span id="BackOffice-160"><a href="#BackOffice-160"><span class="linenos">160</span></a>        <span class="p">)</span>
</span><span id="BackOffice-161"><a href="#BackOffice-161"><span class="linenos">161</span></a>
</span><span id="BackOffice-162"><a href="#BackOffice-162"><span class="linenos">162</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">publish</span><span class="p">(</span>
</span><span id="BackOffice-163"><a href="#BackOffice-163"><span class="linenos">163</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BackOffice-164"><a href="#BackOffice-164"><span class="linenos">164</span></a>        <span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="BackOffice-165"><a href="#BackOffice-165"><span class="linenos">165</span></a>        <span class="n">version</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;deprecated&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;deprecated&quot;</span><span class="p">,</span>
</span><span id="BackOffice-166"><a href="#BackOffice-166"><span class="linenos">166</span></a>        <span class="n">reviewer</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="BackOffice-167"><a href="#BackOffice-167"><span class="linenos">167</span></a>    <span class="p">):</span>  <span class="c1"># TODO: remove version and make reviewer mandatory</span>
</span><span id="BackOffice-168"><a href="#BackOffice-168"><span class="linenos">168</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;publish a (staged) resource version&quot;&quot;&quot;</span>
</span><span id="BackOffice-169"><a href="#BackOffice-169"><span class="linenos">169</span></a>        <span class="k">if</span> <span class="n">version</span> <span class="o">!=</span> <span class="s2">&quot;deprecated&quot;</span><span class="p">:</span>
</span><span id="BackOffice-170"><a href="#BackOffice-170"><span class="linenos">170</span></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;`version` argument is deprecated and will be removed soon&quot;</span><span class="p">)</span>
</span><span id="BackOffice-171"><a href="#BackOffice-171"><span class="linenos">171</span></a>
</span><span id="BackOffice-172"><a href="#BackOffice-172"><span class="linenos">172</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">reviewer</span><span class="p">:</span>
</span><span id="BackOffice-173"><a href="#BackOffice-173"><span class="linenos">173</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing `reviewer`&quot;</span><span class="p">)</span>
</span><span id="BackOffice-174"><a href="#BackOffice-174"><span class="linenos">174</span></a>
</span><span id="BackOffice-175"><a href="#BackOffice-175"><span class="linenos">175</span></a>        <span class="n">rv</span> <span class="o">=</span> <span class="n">RecordDraft</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">,</span> <span class="n">concept_id</span><span class="o">=</span><span class="n">concept_id</span><span class="p">)</span>
</span><span id="BackOffice-176"><a href="#BackOffice-176"><span class="linenos">176</span></a>
</span><span id="BackOffice-177"><a href="#BackOffice-177"><span class="linenos">177</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span> <span class="n">Record</span><span class="p">):</span>
</span><span id="BackOffice-178"><a href="#BackOffice-178"><span class="linenos">178</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot publish already published </span><span class="si">{</span><span class="n">concept_id</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="BackOffice-179"><a href="#BackOffice-179"><span class="linenos">179</span></a>
</span><span id="BackOffice-180"><a href="#BackOffice-180"><span class="linenos">180</span></a>        <span class="n">published</span><span class="p">:</span> <span class="n">Record</span> <span class="o">=</span> <span class="n">rv</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">reviewer</span><span class="p">)</span>
</span><span id="BackOffice-181"><a href="#BackOffice-181"><span class="linenos">181</span></a>        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">published</span><span class="p">,</span> <span class="n">Record</span><span class="p">)</span>
</span><span id="BackOffice-182"><a href="#BackOffice-182"><span class="linenos">182</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">generate_collection_json</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;published&quot;</span><span class="p">,</span> <span class="n">ignore_test_summaries</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="BackOffice-183"><a href="#BackOffice-183"><span class="linenos">183</span></a>        <span class="n">notify_uploader</span><span class="p">(</span>
</span><span id="BackOffice-184"><a href="#BackOffice-184"><span class="linenos">184</span></a>            <span class="n">published</span><span class="p">,</span>
</span><span id="BackOffice-185"><a href="#BackOffice-185"><span class="linenos">185</span></a>            <span class="s2">&quot;was published! 🎉&quot;</span><span class="p">,</span>
</span><span id="BackOffice-186"><a href="#BackOffice-186"><span class="linenos">186</span></a>            <span class="sa">f</span><span class="s2">&quot;Thank you for contributing </span><span class="si">{</span><span class="n">published</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> to bioimage.io! 🙏.</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="BackOffice-187"><a href="#BackOffice-187"><span class="linenos">187</span></a>            <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Check it out at </span><span class="si">{</span><span class="n">published</span><span class="o">.</span><span class="n">bioimageio_url</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="BackOffice-188"><a href="#BackOffice-188"><span class="linenos">188</span></a>        <span class="p">)</span>
</span><span id="BackOffice-189"><a href="#BackOffice-189"><span class="linenos">189</span></a>
</span><span id="BackOffice-190"><a href="#BackOffice-190"><span class="linenos">190</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">backup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">destination</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;deprecated&quot;</span><span class="p">):</span>
</span><span id="BackOffice-191"><a href="#BackOffice-191"><span class="linenos">191</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;backup the whole collection (to zenodo.org)</span>
</span><span id="BackOffice-192"><a href="#BackOffice-192"><span class="linenos">192</span></a>
</span><span id="BackOffice-193"><a href="#BackOffice-193"><span class="linenos">193</span></a><span class="sd">        Each resource is separately backed up to zenodo.org to get a concept DOI and version DOIs for every published version</span>
</span><span id="BackOffice-194"><a href="#BackOffice-194"><span class="linenos">194</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BackOffice-195"><a href="#BackOffice-195"><span class="linenos">195</span></a>        <span class="k">if</span> <span class="n">destination</span> <span class="o">!=</span> <span class="s2">&quot;deprecated&quot;</span><span class="p">:</span>
</span><span id="BackOffice-196"><a href="#BackOffice-196"><span class="linenos">196</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;argument `destination` is deprecated&quot;</span><span class="p">)</span>
</span><span id="BackOffice-197"><a href="#BackOffice-197"><span class="linenos">197</span></a>
</span><span id="BackOffice-198"><a href="#BackOffice-198"><span class="linenos">198</span></a>        <span class="n">_</span> <span class="o">=</span> <span class="n">backup</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">)</span>
</span><span id="BackOffice-199"><a href="#BackOffice-199"><span class="linenos">199</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">generate_collection_json</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;published&quot;</span><span class="p">,</span> <span class="n">ignore_test_summaries</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="BackOffice-200"><a href="#BackOffice-200"><span class="linenos">200</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">generate_collection_json</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;draft&quot;</span><span class="p">,</span> <span class="n">ignore_test_summaries</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="BackOffice-201"><a href="#BackOffice-201"><span class="linenos">201</span></a>
</span><span id="BackOffice-202"><a href="#BackOffice-202"><span class="linenos">202</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_collection_json</span><span class="p">(</span>
</span><span id="BackOffice-203"><a href="#BackOffice-203"><span class="linenos">203</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BackOffice-204"><a href="#BackOffice-204"><span class="linenos">204</span></a>        <span class="n">mode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;published&quot;</span><span class="p">,</span> <span class="s2">&quot;draft&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;published&quot;</span><span class="p">,</span>
</span><span id="BackOffice-205"><a href="#BackOffice-205"><span class="linenos">205</span></a>        <span class="n">ignore_test_summaries</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="BackOffice-206"><a href="#BackOffice-206"><span class="linenos">206</span></a>    <span class="p">):</span>
</span><span id="BackOffice-207"><a href="#BackOffice-207"><span class="linenos">207</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;generate the collection.json file --- a summary of the whole collection&quot;&quot;&quot;</span>
</span><span id="BackOffice-208"><a href="#BackOffice-208"><span class="linenos">208</span></a>        <span class="n">RemoteCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">)</span><span class="o">.</span><span class="n">generate_collection_json</span><span class="p">(</span>
</span><span id="BackOffice-209"><a href="#BackOffice-209"><span class="linenos">209</span></a>            <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span> <span class="n">ignore_test_summaries</span><span class="o">=</span><span class="n">ignore_test_summaries</span>
</span><span id="BackOffice-210"><a href="#BackOffice-210"><span class="linenos">210</span></a>        <span class="p">)</span>
</span><span id="BackOffice-211"><a href="#BackOffice-211"><span class="linenos">211</span></a>
</span><span id="BackOffice-212"><a href="#BackOffice-212"><span class="linenos">212</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">forward_emails_to_chat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="BackOffice-213"><a href="#BackOffice-213"><span class="linenos">213</span></a>        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;disabled&quot;</span><span class="p">)</span>
</span><span id="BackOffice-214"><a href="#BackOffice-214"><span class="linenos">214</span></a>        <span class="c1"># forward_emails_to_chat(self.client, last_n_days=7)</span>
</span><span id="BackOffice-215"><a href="#BackOffice-215"><span class="linenos">215</span></a>
</span><span id="BackOffice-216"><a href="#BackOffice-216"><span class="linenos">216</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_chat_message</span><span class="p">(</span>
</span><span id="BackOffice-217"><a href="#BackOffice-217"><span class="linenos">217</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">chat_message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="BackOffice-218"><a href="#BackOffice-218"><span class="linenos">218</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Chat</span><span class="p">:</span>
</span><span id="BackOffice-219"><a href="#BackOffice-219"><span class="linenos">219</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;add message to chat</span>
</span><span id="BackOffice-220"><a href="#BackOffice-220"><span class="linenos">220</span></a>
</span><span id="BackOffice-221"><a href="#BackOffice-221"><span class="linenos">221</span></a><span class="sd">        Returns: updated chat</span>
</span><span id="BackOffice-222"><a href="#BackOffice-222"><span class="linenos">222</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BackOffice-223"><a href="#BackOffice-223"><span class="linenos">223</span></a>        <span class="n">chat</span> <span class="o">=</span> <span class="n">Chat</span><span class="p">(</span>
</span><span id="BackOffice-224"><a href="#BackOffice-224"><span class="linenos">224</span></a>            <span class="n">messages</span><span class="o">=</span><span class="p">[</span>
</span><span id="BackOffice-225"><a href="#BackOffice-225"><span class="linenos">225</span></a>                <span class="n">Message</span><span class="p">(</span><span class="n">author</span><span class="o">=</span><span class="n">author</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">chat_message</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>
</span><span id="BackOffice-226"><a href="#BackOffice-226"><span class="linenos">226</span></a>            <span class="p">]</span>
</span><span id="BackOffice-227"><a href="#BackOffice-227"><span class="linenos">227</span></a>        <span class="p">)</span>
</span><span id="BackOffice-228"><a href="#BackOffice-228"><span class="linenos">228</span></a>        <span class="n">rv</span> <span class="o">=</span> <span class="n">get_remote_resource_version</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>
</span><span id="BackOffice-229"><a href="#BackOffice-229"><span class="linenos">229</span></a>        <span class="n">rv</span><span class="o">.</span><span class="n">extend_chat</span><span class="p">(</span><span class="n">chat</span><span class="p">)</span>
</span><span id="BackOffice-230"><a href="#BackOffice-230"><span class="linenos">230</span></a>        <span class="k">return</span> <span class="n">rv</span><span class="o">.</span><span class="n">chat</span>
</span><span id="BackOffice-231"><a href="#BackOffice-231"><span class="linenos">231</span></a>
</span><span id="BackOffice-232"><a href="#BackOffice-232"><span class="linenos">232</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_chat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Chat</span><span class="p">:</span>
</span><span id="BackOffice-233"><a href="#BackOffice-233"><span class="linenos">233</span></a>        <span class="n">rv</span> <span class="o">=</span> <span class="n">get_remote_resource_version</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>
</span><span id="BackOffice-234"><a href="#BackOffice-234"><span class="linenos">234</span></a>        <span class="k">return</span> <span class="n">rv</span><span class="o">.</span><span class="n">chat</span>
</span></pre></div>


            <div class="docstring"><p>This backoffice aids to maintain the bioimage.io collection</p>
</div>


                            <div id="BackOffice.__init__" class="classattr">
                                        <input id="BackOffice.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">BackOffice</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;uk1s3.embassy.ebi.ac.uk&#39;</span>,</span><span class="param">	<span class="n">bucket</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;public-datasets&#39;</span>,</span><span class="param">	<span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;testing.bioimage.io/runner/instance&#39;</span></span>)</span>

                <label class="view-source-button" for="BackOffice.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BackOffice.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BackOffice.__init__-31"><a href="#BackOffice.__init__-31"><span class="linenos">31</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="BackOffice.__init__-32"><a href="#BackOffice.__init__-32"><span class="linenos">32</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BackOffice.__init__-33"><a href="#BackOffice.__init__-33"><span class="linenos">33</span></a>        <span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">s3_host</span><span class="p">,</span>
</span><span id="BackOffice.__init__-34"><a href="#BackOffice.__init__-34"><span class="linenos">34</span></a>        <span class="n">bucket</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">s3_bucket</span><span class="p">,</span>
</span><span id="BackOffice.__init__-35"><a href="#BackOffice.__init__-35"><span class="linenos">35</span></a>        <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">s3_folder</span><span class="p">,</span>
</span><span id="BackOffice.__init__-36"><a href="#BackOffice.__init__-36"><span class="linenos">36</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="BackOffice.__init__-37"><a href="#BackOffice.__init__-37"><span class="linenos">37</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="BackOffice.__init__-38"><a href="#BackOffice.__init__-38"><span class="linenos">38</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">,</span> <span class="n">bucket</span><span class="o">=</span><span class="n">bucket</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">)</span>
</span><span id="BackOffice.__init__-39"><a href="#BackOffice.__init__-39"><span class="linenos">39</span></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;created backoffice with client </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="BackOffice.client" class="classattr">
                                <div class="attr variable">
            <span class="name">client</span>

        
    </div>
    <a class="headerlink" href="#BackOffice.client"></a>
    
    

                            </div>
                            <div id="BackOffice.download" class="classattr">
                                        <input id="BackOffice.download-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">download</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">in_collection_path</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">output_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="BackOffice.download-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BackOffice.download"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BackOffice.download-41"><a href="#BackOffice.download-41"><span class="linenos">41</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">download</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_collection_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">output_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="BackOffice.download-42"><a href="#BackOffice.download-42"><span class="linenos">42</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;downlaod a file from the collection (using the MinIO client)&quot;&quot;&quot;</span>
</span><span id="BackOffice.download-43"><a href="#BackOffice.download-43"><span class="linenos">43</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">in_collection_path</span><span class="p">)</span>
</span><span id="BackOffice.download-44"><a href="#BackOffice.download-44"><span class="linenos">44</span></a>        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="BackOffice.download-45"><a href="#BackOffice.download-45"><span class="linenos">45</span></a>            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span>
</span><span id="BackOffice.download-46"><a href="#BackOffice.download-46"><span class="linenos">46</span></a>                <span class="sa">f</span><span class="s2">&quot;failed to download </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_file_url</span><span class="p">(</span><span class="n">in_collection_path</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="BackOffice.download-47"><a href="#BackOffice.download-47"><span class="linenos">47</span></a>            <span class="p">)</span>
</span><span id="BackOffice.download-48"><a href="#BackOffice.download-48"><span class="linenos">48</span></a>
</span><span id="BackOffice.download-49"><a href="#BackOffice.download-49"><span class="linenos">49</span></a>        <span class="k">if</span> <span class="n">output_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="BackOffice.download-50"><a href="#BackOffice.download-50"><span class="linenos">50</span></a>            <span class="n">output_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">in_collection_path</span><span class="p">)</span>
</span><span id="BackOffice.download-51"><a href="#BackOffice.download-51"><span class="linenos">51</span></a>
</span><span id="BackOffice.download-52"><a href="#BackOffice.download-52"><span class="linenos">52</span></a>        <span class="n">_</span> <span class="o">=</span> <span class="n">output_path</span><span class="o">.</span><span class="n">write_bytes</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>downlaod a file from the collection (using the MinIO client)</p>
</div>


                            </div>
                            <div id="BackOffice.log" class="classattr">
                                        <input id="BackOffice.log-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">log</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">message</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">version</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="BackOffice.log-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BackOffice.log"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BackOffice.log-54"><a href="#BackOffice.log-54"><span class="linenos">54</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">log</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="BackOffice.log-55"><a href="#BackOffice.log-55"><span class="linenos">55</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;log a message&quot;&quot;&quot;</span>
</span><span id="BackOffice.log-56"><a href="#BackOffice.log-56"><span class="linenos">56</span></a>
</span><span id="BackOffice.log-57"><a href="#BackOffice.log-57"><span class="linenos">57</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">settings</span><span class="o">.</span><span class="n">run_url</span><span class="p">:</span>
</span><span id="BackOffice.log-58"><a href="#BackOffice.log-58"><span class="linenos">58</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;RUN_URL&#39; not set&quot;</span><span class="p">)</span>
</span><span id="BackOffice.log-59"><a href="#BackOffice.log-59"><span class="linenos">59</span></a>
</span><span id="BackOffice.log-60"><a href="#BackOffice.log-60"><span class="linenos">60</span></a>        <span class="n">rv</span> <span class="o">=</span> <span class="n">get_remote_resource_version</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>
</span><span id="BackOffice.log-61"><a href="#BackOffice.log-61"><span class="linenos">61</span></a>        <span class="n">rv</span><span class="o">.</span><span class="n">extend_log</span><span class="p">(</span><span class="n">Log</span><span class="p">(</span><span class="n">entries</span><span class="o">=</span><span class="p">[</span><span class="n">LogEntry</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)]))</span>
</span></pre></div>


            <div class="docstring"><p>log a message</p>
</div>


                            </div>
                            <div id="BackOffice.wipe" class="classattr">
                                        <input id="BackOffice.wipe-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">wipe</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">subfolder</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="BackOffice.wipe-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BackOffice.wipe"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BackOffice.wipe-63"><a href="#BackOffice.wipe-63"><span class="linenos">63</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">wipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subfolder</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
</span><span id="BackOffice.wipe-64"><a href="#BackOffice.wipe-64"><span class="linenos">64</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;DANGER ZONE: wipes `subfolder` completely, only use for test folders!&quot;&quot;&quot;</span>
</span><span id="BackOffice.wipe-65"><a href="#BackOffice.wipe-65"><span class="linenos">65</span></a>        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_file_url</span><span class="p">(</span><span class="n">subfolder</span><span class="p">)</span>
</span><span id="BackOffice.wipe-66"><a href="#BackOffice.wipe-66"><span class="linenos">66</span></a>        <span class="n">key_parts</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;sandbox&quot;</span><span class="p">,</span> <span class="s2">&quot;testing&quot;</span><span class="p">)</span>
</span><span id="BackOffice.wipe-67"><a href="#BackOffice.wipe-67"><span class="linenos">67</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">p</span> <span class="ow">in</span> <span class="n">url</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">key_parts</span><span class="p">):</span>
</span><span id="BackOffice.wipe-68"><a href="#BackOffice.wipe-68"><span class="linenos">68</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Refusing to wipe </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2"> (missing any of </span><span class="si">{</span><span class="n">key_parts</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</span><span id="BackOffice.wipe-69"><a href="#BackOffice.wipe-69"><span class="linenos">69</span></a>
</span><span id="BackOffice.wipe-70"><a href="#BackOffice.wipe-70"><span class="linenos">70</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">rm_dir</span><span class="p">(</span><span class="n">subfolder</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>DANGER ZONE: wipes <code>subfolder</code> completely, only use for test folders!</p>
</div>


                            </div>
                            <div id="BackOffice.draft" class="classattr">
                                        <input id="BackOffice.draft-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">draft</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">package_url</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="BackOffice.draft-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BackOffice.draft"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BackOffice.draft-72"><a href="#BackOffice.draft-72"><span class="linenos">72</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">draft</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">package_url</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="BackOffice.draft-73"><a href="#BackOffice.draft-73"><span class="linenos">73</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;stage a new resourse version draft from `package_url`</span>
</span><span id="BackOffice.draft-74"><a href="#BackOffice.draft-74"><span class="linenos">74</span></a>
</span><span id="BackOffice.draft-75"><a href="#BackOffice.draft-75"><span class="linenos">75</span></a><span class="sd">        Args:</span>
</span><span id="BackOffice.draft-76"><a href="#BackOffice.draft-76"><span class="linenos">76</span></a><span class="sd">            concept_id: overwrite `id` found in **package_url**.</span>
</span><span id="BackOffice.draft-77"><a href="#BackOffice.draft-77"><span class="linenos">77</span></a><span class="sd">                        If **concept_id** is an empty string a new concept_id is</span>
</span><span id="BackOffice.draft-78"><a href="#BackOffice.draft-78"><span class="linenos">78</span></a><span class="sd">                        assigned.</span>
</span><span id="BackOffice.draft-79"><a href="#BackOffice.draft-79"><span class="linenos">79</span></a><span class="sd">            package_url: Public source of zipped package to upload.</span>
</span><span id="BackOffice.draft-80"><a href="#BackOffice.draft-80"><span class="linenos">80</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BackOffice.draft-81"><a href="#BackOffice.draft-81"><span class="linenos">81</span></a>        <span class="n">_</span> <span class="o">=</span> <span class="n">draft_new_version</span><span class="p">(</span><span class="n">RemoteCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">),</span> <span class="n">package_url</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">)</span>
</span><span id="BackOffice.draft-82"><a href="#BackOffice.draft-82"><span class="linenos">82</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">generate_collection_json</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;draft&quot;</span><span class="p">,</span> <span class="n">ignore_test_summaries</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>stage a new resourse version draft from <code>package_url</code></p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>concept_id:</strong>  overwrite <code>id</code> found in <strong>package_url</strong>.
If <strong>concept_id</strong> is an empty string a new concept_id is
assigned.</li>
<li><strong>package_url:</strong>  Public source of zipped package to upload.</li>
</ul>
</div>


                            </div>
                            <div id="BackOffice.stage" class="classattr">
                                        <input id="BackOffice.stage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">stage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">package_url</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="BackOffice.stage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BackOffice.stage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BackOffice.stage-72"><a href="#BackOffice.stage-72"><span class="linenos">72</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">draft</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">package_url</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="BackOffice.stage-73"><a href="#BackOffice.stage-73"><span class="linenos">73</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;stage a new resourse version draft from `package_url`</span>
</span><span id="BackOffice.stage-74"><a href="#BackOffice.stage-74"><span class="linenos">74</span></a>
</span><span id="BackOffice.stage-75"><a href="#BackOffice.stage-75"><span class="linenos">75</span></a><span class="sd">        Args:</span>
</span><span id="BackOffice.stage-76"><a href="#BackOffice.stage-76"><span class="linenos">76</span></a><span class="sd">            concept_id: overwrite `id` found in **package_url**.</span>
</span><span id="BackOffice.stage-77"><a href="#BackOffice.stage-77"><span class="linenos">77</span></a><span class="sd">                        If **concept_id** is an empty string a new concept_id is</span>
</span><span id="BackOffice.stage-78"><a href="#BackOffice.stage-78"><span class="linenos">78</span></a><span class="sd">                        assigned.</span>
</span><span id="BackOffice.stage-79"><a href="#BackOffice.stage-79"><span class="linenos">79</span></a><span class="sd">            package_url: Public source of zipped package to upload.</span>
</span><span id="BackOffice.stage-80"><a href="#BackOffice.stage-80"><span class="linenos">80</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BackOffice.stage-81"><a href="#BackOffice.stage-81"><span class="linenos">81</span></a>        <span class="n">_</span> <span class="o">=</span> <span class="n">draft_new_version</span><span class="p">(</span><span class="n">RemoteCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">),</span> <span class="n">package_url</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">)</span>
</span><span id="BackOffice.stage-82"><a href="#BackOffice.stage-82"><span class="linenos">82</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">generate_collection_json</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;draft&quot;</span><span class="p">,</span> <span class="n">ignore_test_summaries</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>stage a new resourse version draft from <code>package_url</code></p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>concept_id:</strong>  overwrite <code>id</code> found in <strong>package_url</strong>.
If <strong>concept_id</strong> is an empty string a new concept_id is
assigned.</li>
<li><strong>package_url:</strong>  Public source of zipped package to upload.</li>
</ul>
</div>


                            </div>
                            <div id="BackOffice.validate_format" class="classattr">
                                        <input id="BackOffice.validate_format-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">validate_format</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">version</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="BackOffice.validate_format-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BackOffice.validate_format"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BackOffice.validate_format-86"><a href="#BackOffice.validate_format-86"><span class="linenos">86</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">validate_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="BackOffice.validate_format-87"><a href="#BackOffice.validate_format-87"><span class="linenos">87</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;validate a resource version&#39;s rdf.yaml&quot;&quot;&quot;</span>
</span><span id="BackOffice.validate_format-88"><a href="#BackOffice.validate_format-88"><span class="linenos">88</span></a>        <span class="n">rv</span> <span class="o">=</span> <span class="n">get_remote_resource_version</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>
</span><span id="BackOffice.validate_format-89"><a href="#BackOffice.validate_format-89"><span class="linenos">89</span></a>        <span class="n">validate_format</span><span class="p">(</span><span class="n">rv</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>validate a resource version's rdf.yaml</p>
</div>


                            </div>
                            <div id="BackOffice.test" class="classattr">
                                        <input id="BackOffice.test-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">test</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">version</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">weight_format</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;keras_hdf5&#39;</span><span class="p">,</span> <span class="s1">&#39;onnx&#39;</span><span class="p">,</span> <span class="s1">&#39;pytorch_state_dict&#39;</span><span class="p">,</span> <span class="s1">&#39;tensorflow_saved_model_bundle&#39;</span><span class="p">,</span> <span class="s1">&#39;torchscript&#39;</span><span class="p">],</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">],</span> <span class="n">NoneType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">create_env_outcome</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;success&#39;</span>,</span><span class="param">	<span class="n">conda_env_file</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="n">PosixPath</span><span class="p">(</span><span class="s1">&#39;environment.yaml&#39;</span><span class="p">)</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="BackOffice.test-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BackOffice.test"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BackOffice.test-91"><a href="#BackOffice.test-91"><span class="linenos"> 91</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">test</span><span class="p">(</span>
</span><span id="BackOffice.test-92"><a href="#BackOffice.test-92"><span class="linenos"> 92</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BackOffice.test-93"><a href="#BackOffice.test-93"><span class="linenos"> 93</span></a>        <span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="BackOffice.test-94"><a href="#BackOffice.test-94"><span class="linenos"> 94</span></a>        <span class="n">version</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="BackOffice.test-95"><a href="#BackOffice.test-95"><span class="linenos"> 95</span></a>        <span class="n">weight_format</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">SupportedWeightsFormat</span><span class="p">,</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BackOffice.test-96"><a href="#BackOffice.test-96"><span class="linenos"> 96</span></a>        <span class="n">create_env_outcome</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;success&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
</span><span id="BackOffice.test-97"><a href="#BackOffice.test-97"><span class="linenos"> 97</span></a>        <span class="n">conda_env_file</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;environment.yaml&quot;</span><span class="p">),</span>
</span><span id="BackOffice.test-98"><a href="#BackOffice.test-98"><span class="linenos"> 98</span></a>    <span class="p">):</span>
</span><span id="BackOffice.test-99"><a href="#BackOffice.test-99"><span class="linenos"> 99</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;run dynamic tests for a (staged) resource version&quot;&quot;&quot;</span>
</span><span id="BackOffice.test-100"><a href="#BackOffice.test-100"><span class="linenos">100</span></a>        <span class="n">rv</span> <span class="o">=</span> <span class="n">get_remote_resource_version</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>
</span><span id="BackOffice.test-101"><a href="#BackOffice.test-101"><span class="linenos">101</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="BackOffice.test-102"><a href="#BackOffice.test-102"><span class="linenos">102</span></a>            <span class="nb">isinstance</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span> <span class="n">RecordDraft</span><span class="p">)</span>
</span><span id="BackOffice.test-103"><a href="#BackOffice.test-103"><span class="linenos">103</span></a>            <span class="ow">and</span> <span class="p">(</span><span class="n">rv_status</span> <span class="o">:=</span> <span class="n">rv</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">status</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="BackOffice.test-104"><a href="#BackOffice.test-104"><span class="linenos">104</span></a>            <span class="ow">and</span> <span class="n">rv_status</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;unpacked&quot;</span>
</span><span id="BackOffice.test-105"><a href="#BackOffice.test-105"><span class="linenos">105</span></a>        <span class="p">):</span>
</span><span id="BackOffice.test-106"><a href="#BackOffice.test-106"><span class="linenos">106</span></a>            <span class="n">rv</span><span class="o">.</span><span class="n">set_testing_status</span><span class="p">(</span>
</span><span id="BackOffice.test-107"><a href="#BackOffice.test-107"><span class="linenos">107</span></a>                <span class="s2">&quot;Testing&quot;</span>
</span><span id="BackOffice.test-108"><a href="#BackOffice.test-108"><span class="linenos">108</span></a>                <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="n">weight_format</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">weight_format</span><span class="si">}</span><span class="s2"> weights&quot;</span><span class="p">),</span>
</span><span id="BackOffice.test-109"><a href="#BackOffice.test-109"><span class="linenos">109</span></a>            <span class="p">)</span>
</span><span id="BackOffice.test-110"><a href="#BackOffice.test-110"><span class="linenos">110</span></a>
</span><span id="BackOffice.test-111"><a href="#BackOffice.test-111"><span class="linenos">111</span></a>        <span class="n">run_dynamic_tests</span><span class="p">(</span>
</span><span id="BackOffice.test-112"><a href="#BackOffice.test-112"><span class="linenos">112</span></a>            <span class="n">record</span><span class="o">=</span><span class="n">rv</span><span class="p">,</span>
</span><span id="BackOffice.test-113"><a href="#BackOffice.test-113"><span class="linenos">113</span></a>            <span class="n">weight_format</span><span class="o">=</span><span class="n">weight_format</span> <span class="ow">or</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BackOffice.test-114"><a href="#BackOffice.test-114"><span class="linenos">114</span></a>            <span class="n">create_env_outcome</span><span class="o">=</span><span class="n">create_env_outcome</span><span class="p">,</span>
</span><span id="BackOffice.test-115"><a href="#BackOffice.test-115"><span class="linenos">115</span></a>            <span class="n">conda_env_file</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="n">conda_env_file</span><span class="p">),</span>
</span><span id="BackOffice.test-116"><a href="#BackOffice.test-116"><span class="linenos">116</span></a>        <span class="p">)</span>
</span><span id="BackOffice.test-117"><a href="#BackOffice.test-117"><span class="linenos">117</span></a>
</span><span id="BackOffice.test-118"><a href="#BackOffice.test-118"><span class="linenos">118</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="BackOffice.test-119"><a href="#BackOffice.test-119"><span class="linenos">119</span></a>            <span class="nb">isinstance</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span> <span class="n">RecordDraft</span><span class="p">)</span>
</span><span id="BackOffice.test-120"><a href="#BackOffice.test-120"><span class="linenos">120</span></a>            <span class="ow">and</span> <span class="p">(</span><span class="n">rv_status</span> <span class="o">:=</span> <span class="n">rv</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">status</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="BackOffice.test-121"><a href="#BackOffice.test-121"><span class="linenos">121</span></a>            <span class="ow">and</span> <span class="n">rv_status</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;testing&quot;</span>
</span><span id="BackOffice.test-122"><a href="#BackOffice.test-122"><span class="linenos">122</span></a>        <span class="p">):</span>
</span><span id="BackOffice.test-123"><a href="#BackOffice.test-123"><span class="linenos">123</span></a>            <span class="n">rv</span><span class="o">.</span><span class="n">await_review</span><span class="p">()</span>
</span><span id="BackOffice.test-124"><a href="#BackOffice.test-124"><span class="linenos">124</span></a>            <span class="n">notify_uploader</span><span class="p">(</span>
</span><span id="BackOffice.test-125"><a href="#BackOffice.test-125"><span class="linenos">125</span></a>                <span class="n">rv</span><span class="p">,</span>
</span><span id="BackOffice.test-126"><a href="#BackOffice.test-126"><span class="linenos">126</span></a>                <span class="s2">&quot;is awaiting review ⌛&quot;</span><span class="p">,</span>
</span><span id="BackOffice.test-127"><a href="#BackOffice.test-127"><span class="linenos">127</span></a>                <span class="sa">f</span><span class="s2">&quot;Thank you for submitting </span><span class="si">{</span><span class="n">rv</span><span class="o">.</span><span class="n">concept_id</span><span class="si">}</span><span class="s2">!</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="BackOffice.test-128"><a href="#BackOffice.test-128"><span class="linenos">128</span></a>                <span class="o">+</span> <span class="s2">&quot;Our maintainers will take a look shortly.</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="BackOffice.test-129"><a href="#BackOffice.test-129"><span class="linenos">129</span></a>                <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;A preview is available [here](</span><span class="si">{</span><span class="n">rv</span><span class="o">.</span><span class="n">bioimageio_url</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
</span><span id="BackOffice.test-130"><a href="#BackOffice.test-130"><span class="linenos">130</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>run dynamic tests for a (staged) resource version</p>
</div>


                            </div>
                            <div id="BackOffice.request_changes" class="classattr">
                                        <input id="BackOffice.request_changes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">request_changes</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">resource_id</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">version</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;deprecated&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;deprecated&#39;</span>,</span><span class="param">	<span class="n">reviewer</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">reason</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="BackOffice.request_changes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BackOffice.request_changes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BackOffice.request_changes-132"><a href="#BackOffice.request_changes-132"><span class="linenos">132</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">request_changes</span><span class="p">(</span>
</span><span id="BackOffice.request_changes-133"><a href="#BackOffice.request_changes-133"><span class="linenos">133</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BackOffice.request_changes-134"><a href="#BackOffice.request_changes-134"><span class="linenos">134</span></a>        <span class="n">resource_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="BackOffice.request_changes-135"><a href="#BackOffice.request_changes-135"><span class="linenos">135</span></a>        <span class="n">version</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;deprecated&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;deprecated&quot;</span><span class="p">,</span>
</span><span id="BackOffice.request_changes-136"><a href="#BackOffice.request_changes-136"><span class="linenos">136</span></a>        <span class="n">reviewer</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="BackOffice.request_changes-137"><a href="#BackOffice.request_changes-137"><span class="linenos">137</span></a>        <span class="n">reason</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="BackOffice.request_changes-138"><a href="#BackOffice.request_changes-138"><span class="linenos">138</span></a>    <span class="p">):</span>
</span><span id="BackOffice.request_changes-139"><a href="#BackOffice.request_changes-139"><span class="linenos">139</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;mark a (staged) resource version as needing changes&quot;&quot;&quot;</span>
</span><span id="BackOffice.request_changes-140"><a href="#BackOffice.request_changes-140"><span class="linenos">140</span></a>        <span class="k">if</span> <span class="n">version</span> <span class="o">!=</span> <span class="s2">&quot;deprecated&quot;</span><span class="p">:</span>
</span><span id="BackOffice.request_changes-141"><a href="#BackOffice.request_changes-141"><span class="linenos">141</span></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;`version` argument is depcrecated and will be removed soon&quot;</span><span class="p">)</span>
</span><span id="BackOffice.request_changes-142"><a href="#BackOffice.request_changes-142"><span class="linenos">142</span></a>
</span><span id="BackOffice.request_changes-143"><a href="#BackOffice.request_changes-143"><span class="linenos">143</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">reviewer</span><span class="p">:</span>
</span><span id="BackOffice.request_changes-144"><a href="#BackOffice.request_changes-144"><span class="linenos">144</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing `reviewer`&quot;</span><span class="p">)</span>
</span><span id="BackOffice.request_changes-145"><a href="#BackOffice.request_changes-145"><span class="linenos">145</span></a>
</span><span id="BackOffice.request_changes-146"><a href="#BackOffice.request_changes-146"><span class="linenos">146</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">reason</span><span class="p">:</span>
</span><span id="BackOffice.request_changes-147"><a href="#BackOffice.request_changes-147"><span class="linenos">147</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing `reason`&quot;</span><span class="p">)</span>
</span><span id="BackOffice.request_changes-148"><a href="#BackOffice.request_changes-148"><span class="linenos">148</span></a>
</span><span id="BackOffice.request_changes-149"><a href="#BackOffice.request_changes-149"><span class="linenos">149</span></a>        <span class="n">rv</span> <span class="o">=</span> <span class="n">RecordDraft</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">,</span> <span class="n">concept_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">)</span>
</span><span id="BackOffice.request_changes-150"><a href="#BackOffice.request_changes-150"><span class="linenos">150</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">rv</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="BackOffice.request_changes-151"><a href="#BackOffice.request_changes-151"><span class="linenos">151</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">rv</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39; not found&quot;</span><span class="p">)</span>
</span><span id="BackOffice.request_changes-152"><a href="#BackOffice.request_changes-152"><span class="linenos">152</span></a>
</span><span id="BackOffice.request_changes-153"><a href="#BackOffice.request_changes-153"><span class="linenos">153</span></a>        <span class="n">rv</span><span class="o">.</span><span class="n">request_changes</span><span class="p">(</span><span class="n">reviewer</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
</span><span id="BackOffice.request_changes-154"><a href="#BackOffice.request_changes-154"><span class="linenos">154</span></a>        <span class="n">notify_uploader</span><span class="p">(</span>
</span><span id="BackOffice.request_changes-155"><a href="#BackOffice.request_changes-155"><span class="linenos">155</span></a>            <span class="n">rv</span><span class="p">,</span>
</span><span id="BackOffice.request_changes-156"><a href="#BackOffice.request_changes-156"><span class="linenos">156</span></a>            <span class="s2">&quot;needs changes 📑&quot;</span><span class="p">,</span>
</span><span id="BackOffice.request_changes-157"><a href="#BackOffice.request_changes-157"><span class="linenos">157</span></a>            <span class="sa">f</span><span class="s2">&quot;Thank you for submitting </span><span class="si">{</span><span class="n">rv</span><span class="o">.</span><span class="n">concept_id</span><span class="si">}</span><span class="s2">!</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="BackOffice.request_changes-158"><a href="#BackOffice.request_changes-158"><span class="linenos">158</span></a>            <span class="o">+</span> <span class="s2">&quot;We kindly ask you to upload an updated version, because: </span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="BackOffice.request_changes-159"><a href="#BackOffice.request_changes-159"><span class="linenos">159</span></a>            <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">reason</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>  <span class="c1"># TODO: add link to chat</span>
</span><span id="BackOffice.request_changes-160"><a href="#BackOffice.request_changes-160"><span class="linenos">160</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>mark a (staged) resource version as needing changes</p>
</div>


                            </div>
                            <div id="BackOffice.publish" class="classattr">
                                        <input id="BackOffice.publish-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">publish</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">version</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;deprecated&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;deprecated&#39;</span>,</span><span class="param">	<span class="n">reviewer</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="BackOffice.publish-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BackOffice.publish"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BackOffice.publish-162"><a href="#BackOffice.publish-162"><span class="linenos">162</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">publish</span><span class="p">(</span>
</span><span id="BackOffice.publish-163"><a href="#BackOffice.publish-163"><span class="linenos">163</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BackOffice.publish-164"><a href="#BackOffice.publish-164"><span class="linenos">164</span></a>        <span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="BackOffice.publish-165"><a href="#BackOffice.publish-165"><span class="linenos">165</span></a>        <span class="n">version</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;deprecated&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;deprecated&quot;</span><span class="p">,</span>
</span><span id="BackOffice.publish-166"><a href="#BackOffice.publish-166"><span class="linenos">166</span></a>        <span class="n">reviewer</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="BackOffice.publish-167"><a href="#BackOffice.publish-167"><span class="linenos">167</span></a>    <span class="p">):</span>  <span class="c1"># TODO: remove version and make reviewer mandatory</span>
</span><span id="BackOffice.publish-168"><a href="#BackOffice.publish-168"><span class="linenos">168</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;publish a (staged) resource version&quot;&quot;&quot;</span>
</span><span id="BackOffice.publish-169"><a href="#BackOffice.publish-169"><span class="linenos">169</span></a>        <span class="k">if</span> <span class="n">version</span> <span class="o">!=</span> <span class="s2">&quot;deprecated&quot;</span><span class="p">:</span>
</span><span id="BackOffice.publish-170"><a href="#BackOffice.publish-170"><span class="linenos">170</span></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;`version` argument is deprecated and will be removed soon&quot;</span><span class="p">)</span>
</span><span id="BackOffice.publish-171"><a href="#BackOffice.publish-171"><span class="linenos">171</span></a>
</span><span id="BackOffice.publish-172"><a href="#BackOffice.publish-172"><span class="linenos">172</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">reviewer</span><span class="p">:</span>
</span><span id="BackOffice.publish-173"><a href="#BackOffice.publish-173"><span class="linenos">173</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing `reviewer`&quot;</span><span class="p">)</span>
</span><span id="BackOffice.publish-174"><a href="#BackOffice.publish-174"><span class="linenos">174</span></a>
</span><span id="BackOffice.publish-175"><a href="#BackOffice.publish-175"><span class="linenos">175</span></a>        <span class="n">rv</span> <span class="o">=</span> <span class="n">RecordDraft</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">,</span> <span class="n">concept_id</span><span class="o">=</span><span class="n">concept_id</span><span class="p">)</span>
</span><span id="BackOffice.publish-176"><a href="#BackOffice.publish-176"><span class="linenos">176</span></a>
</span><span id="BackOffice.publish-177"><a href="#BackOffice.publish-177"><span class="linenos">177</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span> <span class="n">Record</span><span class="p">):</span>
</span><span id="BackOffice.publish-178"><a href="#BackOffice.publish-178"><span class="linenos">178</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot publish already published </span><span class="si">{</span><span class="n">concept_id</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="BackOffice.publish-179"><a href="#BackOffice.publish-179"><span class="linenos">179</span></a>
</span><span id="BackOffice.publish-180"><a href="#BackOffice.publish-180"><span class="linenos">180</span></a>        <span class="n">published</span><span class="p">:</span> <span class="n">Record</span> <span class="o">=</span> <span class="n">rv</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">reviewer</span><span class="p">)</span>
</span><span id="BackOffice.publish-181"><a href="#BackOffice.publish-181"><span class="linenos">181</span></a>        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">published</span><span class="p">,</span> <span class="n">Record</span><span class="p">)</span>
</span><span id="BackOffice.publish-182"><a href="#BackOffice.publish-182"><span class="linenos">182</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">generate_collection_json</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;published&quot;</span><span class="p">,</span> <span class="n">ignore_test_summaries</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="BackOffice.publish-183"><a href="#BackOffice.publish-183"><span class="linenos">183</span></a>        <span class="n">notify_uploader</span><span class="p">(</span>
</span><span id="BackOffice.publish-184"><a href="#BackOffice.publish-184"><span class="linenos">184</span></a>            <span class="n">published</span><span class="p">,</span>
</span><span id="BackOffice.publish-185"><a href="#BackOffice.publish-185"><span class="linenos">185</span></a>            <span class="s2">&quot;was published! 🎉&quot;</span><span class="p">,</span>
</span><span id="BackOffice.publish-186"><a href="#BackOffice.publish-186"><span class="linenos">186</span></a>            <span class="sa">f</span><span class="s2">&quot;Thank you for contributing </span><span class="si">{</span><span class="n">published</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> to bioimage.io! 🙏.</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="BackOffice.publish-187"><a href="#BackOffice.publish-187"><span class="linenos">187</span></a>            <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Check it out at </span><span class="si">{</span><span class="n">published</span><span class="o">.</span><span class="n">bioimageio_url</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="BackOffice.publish-188"><a href="#BackOffice.publish-188"><span class="linenos">188</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>publish a (staged) resource version</p>
</div>


                            </div>
                            <div id="BackOffice.backup" class="classattr">
                                        <input id="BackOffice.backup-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">backup</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">destination</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;deprecated&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="BackOffice.backup-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BackOffice.backup"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BackOffice.backup-190"><a href="#BackOffice.backup-190"><span class="linenos">190</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">backup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">destination</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;deprecated&quot;</span><span class="p">):</span>
</span><span id="BackOffice.backup-191"><a href="#BackOffice.backup-191"><span class="linenos">191</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;backup the whole collection (to zenodo.org)</span>
</span><span id="BackOffice.backup-192"><a href="#BackOffice.backup-192"><span class="linenos">192</span></a>
</span><span id="BackOffice.backup-193"><a href="#BackOffice.backup-193"><span class="linenos">193</span></a><span class="sd">        Each resource is separately backed up to zenodo.org to get a concept DOI and version DOIs for every published version</span>
</span><span id="BackOffice.backup-194"><a href="#BackOffice.backup-194"><span class="linenos">194</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BackOffice.backup-195"><a href="#BackOffice.backup-195"><span class="linenos">195</span></a>        <span class="k">if</span> <span class="n">destination</span> <span class="o">!=</span> <span class="s2">&quot;deprecated&quot;</span><span class="p">:</span>
</span><span id="BackOffice.backup-196"><a href="#BackOffice.backup-196"><span class="linenos">196</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;argument `destination` is deprecated&quot;</span><span class="p">)</span>
</span><span id="BackOffice.backup-197"><a href="#BackOffice.backup-197"><span class="linenos">197</span></a>
</span><span id="BackOffice.backup-198"><a href="#BackOffice.backup-198"><span class="linenos">198</span></a>        <span class="n">_</span> <span class="o">=</span> <span class="n">backup</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">)</span>
</span><span id="BackOffice.backup-199"><a href="#BackOffice.backup-199"><span class="linenos">199</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">generate_collection_json</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;published&quot;</span><span class="p">,</span> <span class="n">ignore_test_summaries</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="BackOffice.backup-200"><a href="#BackOffice.backup-200"><span class="linenos">200</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">generate_collection_json</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;draft&quot;</span><span class="p">,</span> <span class="n">ignore_test_summaries</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>backup the whole collection (to zenodo.org)</p>

<p>Each resource is separately backed up to zenodo.org to get a concept DOI and version DOIs for every published version</p>
</div>


                            </div>
                            <div id="BackOffice.generate_collection_json" class="classattr">
                                        <input id="BackOffice.generate_collection_json-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">generate_collection_json</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">mode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;published&#39;</span><span class="p">,</span> <span class="s1">&#39;draft&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;published&#39;</span>,</span><span class="param">	<span class="n">ignore_test_summaries</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="BackOffice.generate_collection_json-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BackOffice.generate_collection_json"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BackOffice.generate_collection_json-202"><a href="#BackOffice.generate_collection_json-202"><span class="linenos">202</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_collection_json</span><span class="p">(</span>
</span><span id="BackOffice.generate_collection_json-203"><a href="#BackOffice.generate_collection_json-203"><span class="linenos">203</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BackOffice.generate_collection_json-204"><a href="#BackOffice.generate_collection_json-204"><span class="linenos">204</span></a>        <span class="n">mode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;published&quot;</span><span class="p">,</span> <span class="s2">&quot;draft&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;published&quot;</span><span class="p">,</span>
</span><span id="BackOffice.generate_collection_json-205"><a href="#BackOffice.generate_collection_json-205"><span class="linenos">205</span></a>        <span class="n">ignore_test_summaries</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="BackOffice.generate_collection_json-206"><a href="#BackOffice.generate_collection_json-206"><span class="linenos">206</span></a>    <span class="p">):</span>
</span><span id="BackOffice.generate_collection_json-207"><a href="#BackOffice.generate_collection_json-207"><span class="linenos">207</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;generate the collection.json file --- a summary of the whole collection&quot;&quot;&quot;</span>
</span><span id="BackOffice.generate_collection_json-208"><a href="#BackOffice.generate_collection_json-208"><span class="linenos">208</span></a>        <span class="n">RemoteCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">)</span><span class="o">.</span><span class="n">generate_collection_json</span><span class="p">(</span>
</span><span id="BackOffice.generate_collection_json-209"><a href="#BackOffice.generate_collection_json-209"><span class="linenos">209</span></a>            <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span> <span class="n">ignore_test_summaries</span><span class="o">=</span><span class="n">ignore_test_summaries</span>
</span><span id="BackOffice.generate_collection_json-210"><a href="#BackOffice.generate_collection_json-210"><span class="linenos">210</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>generate the collection.json file --- a summary of the whole collection</p>
</div>


                            </div>
                            <div id="BackOffice.forward_emails_to_chat" class="classattr">
                                        <input id="BackOffice.forward_emails_to_chat-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">forward_emails_to_chat</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="BackOffice.forward_emails_to_chat-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BackOffice.forward_emails_to_chat"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BackOffice.forward_emails_to_chat-212"><a href="#BackOffice.forward_emails_to_chat-212"><span class="linenos">212</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">forward_emails_to_chat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="BackOffice.forward_emails_to_chat-213"><a href="#BackOffice.forward_emails_to_chat-213"><span class="linenos">213</span></a>        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;disabled&quot;</span><span class="p">)</span>
</span><span id="BackOffice.forward_emails_to_chat-214"><a href="#BackOffice.forward_emails_to_chat-214"><span class="linenos">214</span></a>        <span class="c1"># forward_emails_to_chat(self.client, last_n_days=7)</span>
</span></pre></div>


    

                            </div>
                            <div id="BackOffice.add_chat_message" class="classattr">
                                        <input id="BackOffice.add_chat_message-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_chat_message</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">version</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">chat_message</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">author</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n"><a href="bioimageio_collection_backoffice/db_structure/chat.html#Chat">bioimageio_collection_backoffice.db_structure.chat.Chat</a></span>:</span></span>

                <label class="view-source-button" for="BackOffice.add_chat_message-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BackOffice.add_chat_message"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BackOffice.add_chat_message-216"><a href="#BackOffice.add_chat_message-216"><span class="linenos">216</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_chat_message</span><span class="p">(</span>
</span><span id="BackOffice.add_chat_message-217"><a href="#BackOffice.add_chat_message-217"><span class="linenos">217</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">chat_message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="BackOffice.add_chat_message-218"><a href="#BackOffice.add_chat_message-218"><span class="linenos">218</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Chat</span><span class="p">:</span>
</span><span id="BackOffice.add_chat_message-219"><a href="#BackOffice.add_chat_message-219"><span class="linenos">219</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;add message to chat</span>
</span><span id="BackOffice.add_chat_message-220"><a href="#BackOffice.add_chat_message-220"><span class="linenos">220</span></a>
</span><span id="BackOffice.add_chat_message-221"><a href="#BackOffice.add_chat_message-221"><span class="linenos">221</span></a><span class="sd">        Returns: updated chat</span>
</span><span id="BackOffice.add_chat_message-222"><a href="#BackOffice.add_chat_message-222"><span class="linenos">222</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BackOffice.add_chat_message-223"><a href="#BackOffice.add_chat_message-223"><span class="linenos">223</span></a>        <span class="n">chat</span> <span class="o">=</span> <span class="n">Chat</span><span class="p">(</span>
</span><span id="BackOffice.add_chat_message-224"><a href="#BackOffice.add_chat_message-224"><span class="linenos">224</span></a>            <span class="n">messages</span><span class="o">=</span><span class="p">[</span>
</span><span id="BackOffice.add_chat_message-225"><a href="#BackOffice.add_chat_message-225"><span class="linenos">225</span></a>                <span class="n">Message</span><span class="p">(</span><span class="n">author</span><span class="o">=</span><span class="n">author</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">chat_message</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>
</span><span id="BackOffice.add_chat_message-226"><a href="#BackOffice.add_chat_message-226"><span class="linenos">226</span></a>            <span class="p">]</span>
</span><span id="BackOffice.add_chat_message-227"><a href="#BackOffice.add_chat_message-227"><span class="linenos">227</span></a>        <span class="p">)</span>
</span><span id="BackOffice.add_chat_message-228"><a href="#BackOffice.add_chat_message-228"><span class="linenos">228</span></a>        <span class="n">rv</span> <span class="o">=</span> <span class="n">get_remote_resource_version</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>
</span><span id="BackOffice.add_chat_message-229"><a href="#BackOffice.add_chat_message-229"><span class="linenos">229</span></a>        <span class="n">rv</span><span class="o">.</span><span class="n">extend_chat</span><span class="p">(</span><span class="n">chat</span><span class="p">)</span>
</span><span id="BackOffice.add_chat_message-230"><a href="#BackOffice.add_chat_message-230"><span class="linenos">230</span></a>        <span class="k">return</span> <span class="n">rv</span><span class="o">.</span><span class="n">chat</span>
</span></pre></div>


            <div class="docstring"><p>add message to chat</p>

<p>Returns: updated chat</p>
</div>


                            </div>
                            <div id="BackOffice.get_chat" class="classattr">
                                        <input id="BackOffice.get_chat-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_chat</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">version</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n"><a href="bioimageio_collection_backoffice/db_structure/chat.html#Chat">bioimageio_collection_backoffice.db_structure.chat.Chat</a></span>:</span></span>

                <label class="view-source-button" for="BackOffice.get_chat-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BackOffice.get_chat"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BackOffice.get_chat-232"><a href="#BackOffice.get_chat-232"><span class="linenos">232</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_chat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Chat</span><span class="p">:</span>
</span><span id="BackOffice.get_chat-233"><a href="#BackOffice.get_chat-233"><span class="linenos">233</span></a>        <span class="n">rv</span> <span class="o">=</span> <span class="n">get_remote_resource_version</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">,</span> <span class="n">concept_id</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>
</span><span id="BackOffice.get_chat-234"><a href="#BackOffice.get_chat-234"><span class="linenos">234</span></a>        <span class="k">return</span> <span class="n">rv</span><span class="o">.</span><span class="n">chat</span>
</span></pre></div>


    

                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>